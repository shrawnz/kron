{% load staticfiles %}

<!-- Sab Moh Maya Hai! #D4RKF0RC3 -->
<html>
	<head>
		<title>{{text}}</title>
		<link rel="stylesheet" href="{% static 'kronFrame/css/bootstrap.min.css' %}">
	{# 	<link rel="stylesheet" href="{% static 'kronFrame/css/bootstrap-theme.min.css' %}"> #}
		<link rel="stylesheet" type="text/css" href="{% static 'kronFrame/css/style.css' %}" />
		<link rel="stylesheet" type="text/css" href="{% static 'kronFrame/css/timetablejs.css' %}" />
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.css">	
	</head>
	<body>
		<div class="timetable">
			
		</div>


<div class="container" style="margin-top: 20px;">
<select name="course_select" multiple="" class="ui fluid search dropdown">
  <option value="">Select course</option>
	{% for k in courses %}
		<option value="{{ k.0 }}">{{ k.1 }}</option>
	{% endfor %}
</select>
</div>
<!-- 		<div id="printableArea" class="table-container">
			<TABLE class="TimeTable">
				<TR>
					{% for timer in dataSet.times %}
					<TH>{{ timer }}</TH>
					{% endfor %}
				</TR>
				{% for day, day_objs in dataSet.table.items %}
				<TR class='maintain-height'>
					<TD>{{ dataSet.ourDays.day }}</TD> 
					<TD class="dayskis">{{ day }}</TD>
					{% for slot, slot_obj in day_objs.items %}
					<TD>
						{% if slot_obj %}
							{% for cour in slot_obj %}
								<div class = "{{ cour.woah }}">{{ cour.areaName }}</div>
							{% endfor %}
						{% else %}
							<div></div>
						{% endif %}
					</TD>
					{% endfor %}
				</TR>
				{% endfor %}
			</TABLE>
		</div>
		<div class="selection">
			{% include "kronFrame/selectCourses.html" with dataSet=dataSet only %}
		</div>
		<div class="selection">
			<input type="button" onclick="printDiv('printableArea')" value="Print"/>
			<input type="button" id="btnSave" value="Save PNG"/>
		</div>
		<div class="footer"><div class="footer-text">&copy; Mayank Vachher</div></div>

		<script type="text/javascript" src="{% static 'kronFrame/courseClash.js' %}"></script>
		<script>
			function printDiv(divName) 
			{
     				var printContents = document.getElementById(divName).innerHTML;
				var originalContents = document.body.innerHTML;
				document.body.innerHTML = printContents;
				window.print();
				document.body.innerHTML = originalContents;
			}
		</script>
 -->		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="{% static 'kronFrame/js/timetable.js' %}"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.js"></script>
		<script type="text/javascript">
			var off = {{offered|safe}};
			var courses = {{courses|safe}};
			console.log(off);			
			console.log(courses);
		$(document).ready(function() {

  $('.ui.dropdown').dropdown({
    onChange: function (value, text, $selectedItem) {
      console.log(value);
    	},
		    forceSelection: false, 
		    selectOnKeydown: false, 
		    showOnFocus: false,
		    on: "hover" 
		  });
		  
		});




		</script>
		

		<script>
		var off = {{offered|safe}};

      var timetable = new Timetable();
      timetable.setScope(8,19)
      timetable.addLocations(['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']);

      // for(var i=0;i<off.length;i++)
      // {
      // 	var course = off[i][0];
      // 	var sttime = off[i][1];
      // 	var endtime = off[i][2];
      // 	var type = off[i][3];
      // 	var day = off[i][4];
      // 	sttime = sttime.split(":")
      // 	endtime = endtime.split(":")

      // 	var text = course + "(" + type + ")"
      // 	st1 = parseInt(sttime[0]);
      // 	st2 = parseInt(sttime[1]);
      // 	end1 = parseInt(endtime[0]);
      // 	end2 = parseInt(endtime[1]);
      // 	// console.log();
      // timetable.addEvent(text, day, new Date(2015,7,17,st1,st2), new Date(2015,7,17,end1,end2), { url: '#' });	
      // }
      // timetable.addEvent('Zumba', 'Madrid', new Date(2015,7,17,12), new Date(2015,7,17,13), { url: '#' });
      // timetable.addEvent('Zumbu', 'Madrid', new Date(2015,7,17,13,30), new Date(2015,7,17,15), { url: '#' });
      // timetable.addEvent('Lasergaming', 'London', new Date(2015,7,17,17,45), new Date(2015,7,17,19,30), { class: 'vip-only', data: { maxPlayers: 14, gameType: 'Capture the flag' } });
      // timetable.addEvent('All-you-can-eat grill', 'New York', new Date(2015,7,17,21), new Date(2015,7,18,1,30), { url: '#' });
      // timetable.addEvent('Hackathon', 'Tokyo', new Date(2015,7,17,11,30), new Date(2015,7,17,20)); // options attribute is not used for this event
      // timetable.addEvent('Tokyo Hackathon Livestream', 'Los Angeles', new Date(2015,7,17,12,30), new Date(2015,7,17,16,15)); // options attribute is not used for this event
      // timetable.addEvent('Lunch', 'Jakarta', new Date(2015,7,17,9,30), new Date(2015,7,17,11,45), { onClick: function(event) {
      //   window.alert('You clicked on the ' + event.name + ' event in ' + event.location + '. This is an example of a click handler');
      // }});
      // timetable.addEvent('Cocktails', 'Rotterdam', new Date(2015,7,18,00,00), new Date(2015,7,18,02,00), { class: 'vip-only' });

      var renderer = new Timetable.Renderer(timetable);
      renderer.draw('.timetable');
    </script>


<!-- 		<script type="text/javascript">
		$(function() { 
  			 $("#btnSave").click(function() {
  			 	html2canvas($("#printableArea"), {
           				onrendered: function(canvas) {
          		 			theCanvas = canvas;
						canvas.toBlob(function(blob) {
                    					saveAs(blob, "Dashboard.png"); 
                					});
           					}
        				});
    				});
			});
		</script>
 -->	</body>
</html>
